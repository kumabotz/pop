<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- tell mobile browsers to disable user scaling and to render at full size
    rather than shrink the page down -->
<meta name="viewport" content="width=device-width, user-scalable=no,
    initial-scale=1, maximum-scale=1, user-scalable=0" />

<!-- allow the game to be bookmarked. iPhone bookmarked apps don't display the
    toolbar at the bottom of the page, thus freeing up valuable real estate -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<style type="text/css">
body { margin: 0; padding: 0; background: #000; }
canvas {
  display: block;
  margin: 0 auto; /* center */
  background: #fff;
}
</style>

</head>

<body>
  <canvas></canvas>
  <script type="text/javascript">
    // all the code goes here
    // namespace our game
    var POP = {
      // set up some initial values
      WIDTH: 320,
      HEIGHT: 480,
      // we'll set the rest of these
      // in the init function
      RATIO: null,
      currentWidth: null,
      currentHeight: null,
      canvas: null,
      ctx: null,

      init: function() {
        // the proportion of width to height
        POP.RATIO = POP.WIDTH / POP.HEIGHT;
        // these will change when the screen is resized
        POP.currentWidth = POP.WIDTH;
        POP.currentHeight = POP.HEIGHT;
        // this is our canvas element
        POP.canvas = document.getElementsByTagName('canvas')[0];
        // setting this is important, otherwise the browser will default to
        // 320 x 200
        POP.canvas.width = POP.WIDTH;
        POP.canvas.height = POP.HEIGHT;
        // the canvas context enables us to interact with the canvas api
        POP.ctx = POP.canvas.getContext('2d');

        // we need to sniff out Android and iOS
        // so that we can hide the address bar in our resize function
        POP.ua = navigator.userAgent;
        POP.android = POP.ua.indexOf('Android') > -1 ? true : false;
        POP.ios = (POP.ua.indexOf('iPhone') > -1 ||
            POP.ua.indexOf('iPad') > -1) ? true : false;

        // we're ready to resize
        POP.resize();
      },

      resize: function() {
        POP.currentHeight = window.innerHeight;
        // resize the width in propotion to the new height
        POP.currentWidth = POP.currentHeight * POP.RATIO;

        // this will create some extra space on the page, allowing us to
        // scroll past the address bar, thus hiding it
        if (POP.android || POP.ios) {
          document.body.style.height = (window.innerHeight + 50) + 'px';
        }

        // set the new canvas style width and height
        // note: our canvas is still 320 x 480, but we're essentially scaling
        // it with CSS
        POP.canvas.style.width = POP.currentWidth + 'px';
        POP.canvas.style.height = POP.currentHeight + 'px';

        // we use a timeout here because some mobile browser don't fire if
        // there is not a short delay
        window.setTimeout(function() {
          window.scrollTo(0, 1);
        }, 1);
      }
    };

    window.addEventListener('load', POP.init, false);
    window.addEventListener('resize', POP.resize, false);
  </script>
</body>
</html>
